# Strip all env vars except essential system ones
# Essential vars to keep:
#   PATH, HOME, USER, SHELL, TERM, LANG, TMPDIR, LOGNAME,
#   EDITOR, PWD, OLDPWD, SHLVL,
#   SSH_AUTH_SOCK (for git ssh),
#   HOMEBREW_* (for brew tools),
#   NVM_* PYENV_* (for version managers),
#   TERM_* TMUX* (for terminal),
#   XPC_*, __CFBundleIdentifier, LaunchInstanceID, SECURITYSESSIONID (macOS system)

# Unset all sensitive/unnecessary vars
unset GITLAB_TOKEN
unset IDRAC_PASS
unset AWS_DEFAULT_PROFILE
unset AWS_ACCOUNT_ID
unset AWS_USER_DATA
unset AWS_SSH_KEY_NAME
unset AWS_SSH_KEY_PATH
unset AWS_AMI_NAME
unset AWS_ACCESS_KEY_ID
unset AWS_SECRET_ACCESS_KEY
unset AWS_RDS_CRAWLER_PGDB_USER
unset AWS_RDS_CRAWLER_PGDB_PASS
unset PHYSICAL_HOST
unset PHYSICAL_USER
unset PHYSICAL_PORT
unset PHYSICAL_KEY_PATH
unset REGISTRY_HOSTNAME
unset REGISTRY_USERNAME
unset REGISTRY_PASSWORD
unset ETCD_HOST
unset ETCD_PORT
unset ETCD_CA_CERT_PATH
unset ETCD_CERT_KEY_PATH
unset ETCD_CERT_PATH
unset ETCDCTL_API
unset ETCDCTL_ENDPOINTS
unset ETCDCTL_CACERT
unset ETCDCTL_CERT
unset ETCDCTL_KEY
unset PYTEST_SENTRY_DSN
unset PYTEST_SENTRY_TRACES_SAMPLE_RATE
unset PYTEST_SENTRY_ALWAYS_REPORT
unset PROMTAIL_CERTS_FOLDER
unset HF_HOME
unset SENTRY_ORG
unset SENTRY_AUTH_TOKEN
unset SENTRY_GITLAB_INTEGRATION_CLIENT_SECRET
unset VAULT_ADDR
unset VAULT_NAMESPACE
unset EXPERIMENT_USERNAME
unset EXPERIMENT_NAME
unset IS_EXPERIMENT
unset COMPUTRONIUM_BASE_PRIORITY_KEY
unset GIT_HASH
unset BUILDBOT_REPORTER_SLACK_API_TOKEN
unset SLACK_API_TOKEN
unset MARVIN_SLACK_API_TOKEN
unset GOOGLE_API_KEY
unset GOOGLE_APPLICATION_CREDENTIALS
unset TAILSCALE_KEY
unset TAILSCALE_KEY_EXPIRY
unset TAILSCALE_KEY_OWNER
unset LAMBDA_TAILSCALE_KEY
unset LAMBDA_TAILSCALE_KEY_EXPIRY
unset LAMBDA_TAILSCALE_KEY_OWNER
unset QUINCY_TAILSCALE_KEY
unset QUINCY_TAILSCALE_KEY_EXPIRY
unset PENGUIN_TAILSCALE_KEY
unset PENGUIN_TAILSCALE_KEY_EXPIRY
unset PENGUIN_TAILSCALE_KEY_OWNER
unset REGISTRY_HISTORY_NGROK_AUTH_TOKEN
unset METAPHOR_API_KEY
unset OPENAI_API_KEY
unset INFRA_POSTGRES
unset DATAGEN_NEON_API_KEY
unset DIFFBOT_API_TOKEN
unset TOGETHER_API_KEY
unset IMBUE_SUPERANNOTATE_API_KEY
unset GROQ_API_KEY
unset NGROK_API_KEY
unset NGROK_AUTH_TOKEN
unset NGROK_BASIC_AUTH
unset LOKI_ON_FLY_PUSH_TOKEN
unset GITLAB_TOKEN_FOR_MODAL_BUILD
unset FLY_API_TOKEN_PART1
unset FLY_API_TOKEN_PART2
unset FLY_API_TOKEN
unset MODAL_TOKEN_SECRET
unset MODAL_TOKEN_ID
unset WANDB_API_KEY
unset LAMBDA_LABS_SSH_KEY_PATH
unset SCIENCE_USER
unset SCIENCE_HOST
unset SCIENCE_PORT
unset SCIENCE_KEY_FILE
unset SCIENCE_NOTEBOOK_TOKEN
unset GIT_TOKEN
unset LINEAR_READONLY_API_KEY
unset LINEAR_READWRITE_API_KEY
unset LINEAR_API_KEY
unset GITHUB_PERSONAL_ACCESS_TOKEN_READ_ORG

# Project-specific settings
export NB_DIR="$(cd "$(dirname "$(git rev-parse --git-common-dir 2>/dev/null)")" && pwd)/.nb_docs_repo"
export EDITOR=vi
export NB_AUTO_SYNC=0

# Add winow to PATH
PATH_add tools-llm/winow/.venv/bin

# Add repo-local scripts to PATH
PATH_add bin
